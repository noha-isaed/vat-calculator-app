<header class="app-header">
  <div class="header-content">
    <div class="header-title">
      <h1>ุญุงุณุจุฉ ุงูุถุฑูุจุฉ ุงููุถุงูุฉ</h1>
    </div>
    <div class="header-actions">
      <span class="user-email">{{ userEmail }}</span>
      <button class="logout-btn" (click)="logout()">
        <span class="logout-icon">๐ช</span>
        ุชุณุฌูู ุงูุฎุฑูุฌ
      </button>
    </div>
  </div>
</header>

<div class="container">
  <div class="original-calculator">
    <p class="calculator-description">ุฃุฏุฎู ุฅุฌูุงูู ุงููุจูุนุงุช ูุงููุดุชุฑูุงุช ูุญุณุงุจ ุงูุถุฑูุจุฉ ุงููุณุชุญูุฉ</p>

    <form [formGroup]="form" (ngSubmit)="calculate()">
      <div class="field">
        <label>ูุฌููุน ุงููุจูุนุงุช (ุดุงููุฉ ุงูุถุฑูุจุฉ)</label>
        <input type="number" formControlName="totalSales" step="0.01" />
        <div class="error" *ngIf="form.get('totalSales')?.invalid && form.get('totalSales')?.touched">
          ุฃุฏุฎู ูููุฉ ุตุงูุญุฉ โฅ 0
        </div>
      </div>

      <div class="field">
        <label>ูุฌููุน ุงููุดุชุฑูุงุช (ุดุงููุฉ ุงูุถุฑูุจุฉ)</label>
        <input type="number" formControlName="totalPurchases" step="0.01" />
        <div class="error" *ngIf="form.get('totalPurchases')?.invalid && form.get('totalPurchases')?.touched">
          ุฃุฏุฎู ูููุฉ ุตุงูุญุฉ โฅ 0
        </div>
      </div>

      <div class="field">
        <label>ุนุฏุฏ ุงูุนูููุงุช (ุงุฎุชูุงุฑู)</label>
        <input type="number" formControlName="operationsCount" />
      </div>

      <button type="submit" [disabled]="loading">
        {{ loading ? 'ุฌุงุฑู ุงูุญุณุงุจ...' : 'ุงุญุณุจ ุงูุถุฑูุจุฉ' }}
      </button>
    </form>

    <div class="error" *ngIf="error">{{ error }}</div>

    <div class="results-container" *ngIf="results">
      <div class="results-grid">
        <div class="result-box">
          <div class="result-icon">๐ฐ</div>
          <div class="result-content">
            <div class="result-label">ุตุงูู ุงููุจูุนุงุช</div>
            <div class="result-value">{{ results.results.netSales | number:'1.2-2' }} ุดููู</div>
            <div class="result-subtitle">ูุจู ุงูุถุฑูุจุฉ</div>
          </div>
        </div>

        <div class="result-box">
          <div class="result-icon">๐</div>
          <div class="result-content">
            <div class="result-label">ุตุงูู ุงููุดุชุฑูุงุช</div>
            <div class="result-value">{{ results.results.netPurchases | number:'1.2-2' }} ุดููู</div>
            <div class="result-subtitle">ูุจู ุงูุถุฑูุจุฉ</div>
          </div>
        </div>

        <div class="result-box">
          <div class="result-icon">๐ค</div>
          <div class="result-content">
            <div class="result-label">ุถุฑูุจุฉ ุงููุฎุฑุฌุงุช</div>
            <div class="result-value">{{ results.results.outputVAT | number:'1.2-2' }} ุดููู</div>
            <div class="result-subtitle">ุถุฑูุจุฉ ุงููุจูุนุงุช</div>
          </div>
        </div>

        <div class="result-box">
          <div class="result-icon">๐ฅ</div>
          <div class="result-content">
            <div class="result-label">ุถุฑูุจุฉ ุงููุฏุฎูุงุช</div>
            <div class="result-value">{{ results.results.inputVAT | number:'1.2-2' }} ุดููู</div>
            <div class="result-subtitle">ุถุฑูุจุฉ ุงููุดุชุฑูุงุช</div>
          </div>
        </div>

        <div class="result-box">
          <div class="result-icon">๐ธ</div>
          <div class="result-content">
            <div class="result-label">ุงูุถุฑูุจุฉ ุงููุณุชุญูุฉ</div>
            <div class="result-value">{{ results.results.taxDue | number:'1.2-2' }} ุดููู</div>
            <div class="result-subtitle">ููุฏูุน ููุฏููุฉ</div>
          </div>
        </div>

        <div class="result-box">
          <div class="result-icon">๐</div>
          <div class="result-content">
            <div class="result-label">ุตุงูู ุงูุฑุจุญ</div>
            <div class="result-value">{{ results.results.netProfit | number:'1.2-2' }} ุดููู</div>
            <div class="result-subtitle">ูุจู ุงูุถุฑูุจุฉ</div>
          </div>
        </div>

        <div class="result-box">
          <div class="result-icon">๐</div>
          <div class="result-content">
            <div class="result-label">ูุงูุด ุงูุฑุจุญ</div>
            <div class="result-value">{{ results.results.profitMargin | number:'1.2-2' }}%</div>
            <div class="result-subtitle">ูุณุจุฉ ุงูุฑุจุญูุฉ</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="reverse-calculator">
    <p class="calculator-description">ุฃุฏุฎู ุงูุถุฑูุจุฉ ุงููุณุชุญูุฉ ูุงููุดุชุฑูุงุช ูุญุณุงุจ ุงููุจูุนุงุช ุงููุทููุจุฉ</p>
    
    <form [formGroup]="reverseForm" (ngSubmit)="calculateReverse()">
      <div class="field">
        <label>ุงูุถุฑูุจุฉ ุงููุณุชุญูุฉ ููุฏูุน</label>
        <input type="number" formControlName="taxDue" step="0.01" />
        <div class="error" *ngIf="reverseForm.get('taxDue')?.invalid && reverseForm.get('taxDue')?.touched">
          ุฃุฏุฎู ูููุฉ ุตุงูุญุฉ โฅ 0
        </div>
      </div>

      <div class="field">
        <label>ูุฌููุน ุงููุดุชุฑูุงุช (ุดุงููุฉ ุงูุถุฑูุจุฉ)</label>
        <input type="number" formControlName="totalPurchases" step="0.01" />
        <div class="error" *ngIf="reverseForm.get('totalPurchases')?.invalid && reverseForm.get('totalPurchases')?.touched">
          ุฃุฏุฎู ูููุฉ ุตุงูุญุฉ โฅ 0
        </div>
      </div>

      <button type="submit">
        ุงุญุณุจ ุงููุจูุนุงุช ุงููุทููุจุฉ
      </button>
    </form>

    <div class="results-container" *ngIf="reverseResults">
      <div class="results-grid">
        <div class="result-box highlight">
          <div class="result-icon">๐ฏ</div>
          <div class="result-content">
            <div class="result-label">ุงููุจูุนุงุช ุงููุทููุจุฉ</div>
            <div class="result-value">{{ reverseResults.requiredSales | number:'1.2-2' }} ุดููู</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>